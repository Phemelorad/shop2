<!DOCTYPE html>
<html>
<head>
    <title>Register</title>
    <link rel="stylesheet" href="MAIN.css">
</head>
<body>
  <h1 class="txt">RADIPODI MICRO LOANS</h1>
  <section>
    <form onsubmit="handleRegister(event)">
      <h2>Register</h2>
      Email: <input type="email" id="email" required><br><br>
      Password: <input type="password" id="password" required><br><br>
      <input type="submit" value="Register">
    </form>
  </section>

  <p class="txt">Already have an account? <a href="login.html">Login here</a></p>

  <!-- Load Supabase JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.min.js"></script>

  <script>
    const { createClient } = supabase;
    const supabaseUrl = 'https://cgitlcuheoncjmxxcipq.supabase.co';
    const supabaseKey = 'YOUR_ANON_PUBLIC_KEY'; // Use your anon public key here
    const supabaseClient = createClient(supabaseUrl, supabaseKey);

    async function handleRegister(e) {
      e.preventDefault();
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;

      const { data, error } = await supabaseClient.auth.signUp({
        email: email,
        password: password,
      });

      if (error) {
        alert('Registration failed: ' + error.message);
      } else {
        alert('Registration successful! Please check your email to verify your account.');
        // Optionally redirect to login page:
        // window.location.href = 'login.html';
      }
    }
  </script>
</body>
</html>
